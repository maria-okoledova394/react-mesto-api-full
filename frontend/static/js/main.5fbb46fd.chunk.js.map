{"version":3,"sources":["components/Header.js","components/Register.js","components/Login.js","images/successRegistrationMark.svg","images/faildRegistrationMark.svg","components/InfoTooltip.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Page.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","email","loggedIn","onClick","onSignOut","nameLink","to","way","Register","useState","password","message","userData","setUserData","handleChange","e","target","name","value","onSubmit","preventDefault","onRegister","id","placeholder","onChange","type","Login","onLogin","InfoTooltip","isOpen","onClose","src","isMistake","faildRegistrationMark","successRegistrationMark","alt","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","link","onCardClick","onCardLike","length","onCardDelete","Main","onEditAvatar","avatar","about","onEditProfile","onAddPlace","cards","map","Footer","Date","getFullYear","PopupWithForm","title","children","ImagePopup","api","config","_checkResponse","res","ok","json","Promise","reject","status","this","_url","url","_headers","headers","fetch","method","then","data","body","JSON","stringify","likeCard","removeLike","token","Authorization","EditProfilePopup","setName","description","setDescription","useEffect","onUpdateUser","pattern","minLength","maxLength","required","EditAvatarPopup","avaterRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","nameRef","linkRef","Page","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","setСurrentUser","setCards","closeAllPopups","getProfileInfo","catch","err","console","log","getInitialCards","Provider","changeLikeCardStatus","newCard","state","c","removeCard","filter","changeProfileInfo","updateAvatar","addCard","ProtectedRoute","Component","component","BASE_URL","checkResponse","response","App","setLoggedIn","setIsMistake","popup","setPopup","history","useHistory","handleError","error","checkToken","localStorage","getItem","setToken","auth","push","path","finally","setItem","removeItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5fbb46fd.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <header className=\"header\">\r\n            <div className=\"header__logo\"></div>\r\n            <div>\r\n                <h2 className=\"header__title\">{props.email}</h2>\r\n                {props.loggedIn ? <button onClick={props.onSignOut} className=\"header__exit\">{props.nameLink}</button> : <Link to={props.way} className=\"header__link\">{props.nameLink}</Link>}\r\n            </div>\r\n        </header>    \r\n    );\r\n  }\r\n  \r\n  export default Header;","import { Link } from 'react-router-dom';\r\nimport React, { useState } from 'react';\r\nimport Header from './Header.js';\r\n\r\nfunction Register(props) {\r\n\r\n  const [userData, setUserData] = useState({\r\n    email: '',\r\n    password: '',\r\n    message: ''\r\n  });\r\n\r\n  function handleChange(e) {\r\n    const { name, value } = e.target;\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    // TODO add if (!userData.email || !userData.password)\r\n    const { email, password } = userData;\r\n\r\n    props.onRegister({ email, password })\r\n  }\r\n\r\n  return (\r\n      <>\r\n      <Header onSignOut={props.onSignOut} email={props.email} loggedIn={false} nameLink=\"Войти\" way=\"/signin\" />\r\n      <form className=\"start-form\" onSubmit={handleSubmit}>\r\n        <h1 className=\"start-form__title\">Регистрация</h1>\r\n          <input id=\"email-input\" name=\"email\" className=\"start-form__input\" placeholder=\"Email\" \r\n          value={userData.email} onChange={handleChange} />\r\n          <input id=\"password-input\" type=\"password\" name=\"password\" className=\"start-form__input\" placeholder=\"Пароль\"\r\n          value={userData.password} onChange={handleChange} />\r\n          <button type=\"submit\" className=\"start-form__button\">Зарегистрироваться</button>\r\n      </form>\r\n\r\n      <div className=\"start__signin\">\r\n        <p>Уже зарегистрированы? <Link to=\"/signin\" className=\"start__login-link\">Войти</Link></p>\r\n      </div>\r\n      </>\r\n  );\r\n  }\r\n  \r\n  export default Register;","import React, { useState } from 'react';\r\nimport Header from './Header.js';\r\n\r\nfunction Login(props) {\r\n\r\n  const [userData, setUserData] = useState({\r\n    email: '',\r\n    password: '',\r\n    message: ''\r\n  });\r\n\r\n  function handleChange(e) {\r\n    const { name, value } = e.target;\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!userData.email || !userData.password){\r\n      return;\r\n    }\r\n    const { email, password } = userData;\r\n\r\n    props.onLogin({ email, password })\r\n  }\r\n\r\n    return (\r\n        <>\r\n        <Header onSignOut={props.onSignOut} email={props.email} loggedIn={false} nameLink=\"Регистрация\" way=\"/signup\" />\r\n        <form className=\"start-form\" onSubmit={handleSubmit}>\r\n          <h1 className=\"start-form__title\">Вход</h1>\r\n            <input id=\"email-input\" name=\"email\" className=\"start-form__input\" placeholder=\"Email\" \r\n            value={userData.email} onChange={handleChange} />\r\n            <input id=\"password-input\" type=\"password\" name=\"password\" className=\"start-form__input\" placeholder=\"Пароль\"\r\n            value={userData.password} onChange={handleChange} />\r\n            <button type=\"submit\" className=\"start-form__button\">Войти</button>\r\n        </form>\r\n        </>\r\n    );\r\n  }\r\n  \r\n  export default Login;","export default __webpack_public_path__ + \"static/media/successRegistrationMark.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/faildRegistrationMark.df8eddf6.svg\";","import React from 'react';\r\nimport successRegistrationMark from '../images/successRegistrationMark.svg'\r\nimport faildRegistrationMark from '../images/faildRegistrationMark.svg'\r\n\r\nfunction InfoTooltip(props) {\r\n    return (\r\n      <>\r\n        <div className={`popup ${props.isOpen ? \"popup_opened\" : \"\"}`}>\r\n          <div className=\"popup__container popup__container_type_info\">\r\n            <button className=\"popup__close-button\" type=\"button\" onClick={props.onClose}></button>\r\n            <img className=\"popup__image\" src={props.isMistake ? faildRegistrationMark : successRegistrationMark}\r\n            alt=\"mark\"></img>\r\n            <h2 className=\"popup__title popup__title_function_info\">\r\n              {props.isMistake ? \"Что-то пошло не так! Попробуйте ещё раз.\" : \"Вы успешно зарегистрировались!\"}</h2>\r\n          </div>\r\n        </div>  \r\n      </>\r\n    );\r\n  }\r\n  \r\n  export default InfoTooltip;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = props.card.owner === currentUser._id;\r\n    const isLiked = props.card.likes.some(i => i === currentUser._id);\r\n    const cardDeleteButtonClassName = (\r\n        `${isOwn ? 'elements__delete-button' : 'elements__delete-button_status_notvisible'}`\r\n    );\r\n\r\n    const cardLikeButtonClassName = (\r\n        `elements__like-button ${isLiked ? 'elements__like-button_status_active' : 'elements__like-button_status_notactive'}`\r\n    );\r\n\r\n    function handleClick() {\r\n        props.onCardClick(props.card)\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        props.onCardLike(props.card)\r\n    }\r\n\r\n    function handleDeleteClick () {\r\n        props.onCardDelete(props.card)\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"elements__element\">\r\n            <img className=\"elements__image\" alt={props.card.name} src={props.card.link} onClick={handleClick} />\r\n            <div className=\"elements__info\">\r\n                <h2 className=\"elements__title\">{props.card.name}</h2>\r\n                <div className=\"elements__like-container\">\r\n                    <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\r\n                    <p className=\"elements__like-count\">{props.card.likes.length}</p>\r\n                </div>\r\n                <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleDeleteClick}></button>\r\n            </div>\r\n        </div>  \r\n    );\r\n  }\r\n  \r\n  export default Card;","import React from 'react';\r\nimport Card from './Card.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    return (\r\n        <main>\r\n            <section className=\"profile\">\r\n            <button className=\"profile__avatar-container profile__update-avatar-button\" onClick={props.onEditAvatar} type=\"button\">\r\n                <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар\" />\r\n                <div className=\"profile__avatar-overlay\">\r\n                <i className=\"profile__icon\"></i>\r\n                </div>        \r\n            </button>\r\n            \r\n            <div className=\"profile__info\">\r\n                <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n                <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n                <button className=\"profile__edit-button\" onClick={props.onEditProfile} type=\"button\"></button>\r\n            </div>\r\n            <button className=\"profile__add-button\" onClick={props.onAddPlace} type=\"button\"></button>\r\n            </section>\r\n\r\n            <section className=\"card-list\">\r\n              {props.cards.map((card) => {\r\n                return(\r\n                  <Card key={card._id} card={card} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} />\r\n              )})}\r\n            </section>\r\n        </main>\r\n    );\r\n  }\r\n  \r\n  export default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__text\">&copy; {new Date().getFullYear()} Mesto Russia</p>\r\n        </footer>  \r\n    );\r\n  }\r\n  \r\n  export default Footer;","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n    return (\r\n      <div className={`popup popup_function_${props.name} ${props.isOpen ? \"popup_opened\" : \"\"}`}>\r\n        <form className={`popup__form popup__container popup__container_function_${props.name} popup__container_type_form`} onSubmit={props.onSubmit}>\r\n          <button className=\"popup__close-button\" type=\"button\" onClick={props.onClose}></button>\r\n          <h2 className={`popup__title popup__title_function_${props.name}`}>{props.title}</h2>\r\n          {props.children}\r\n          <button className={`popup__button popup__button-save popup__button-save_function_${props.name}`} type=\"submit\">Сохранить</button>\r\n        </form>\r\n      </div>   \r\n    );\r\n  }\r\n  \r\n  export default PopupWithForm;","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n    return (\r\n      <div className={`popup popup_function_open-image ${props.card.name ? \"popup_opened\" : \"\"}`}>\r\n        <div className=\"popup__container popup__container_function_open-image\">\r\n          <img className=\"popup__image\" alt={props.card.name} src={props.card.link} />\r\n          <p className=\"popup__subscription\">{props.card.name}</p>\r\n          <button className=\"popup__close-button\" type=\"button\" onClick={props.onClose}></button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default ImagePopup;","class Api{\r\n    constructor(config) {\r\n      this._url = config.url;\r\n      this._headers = config.headers;\r\n    }\r\n\r\n    _checkResponse = (res) =>{\r\n      if(res.ok){\r\n        return res.json();    \r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  \r\n    getInitialCards() {\r\n      return fetch(`${this._url}/cards`, {\r\n          method: \"GET\",\r\n          headers: this._headers\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    addCard(data){\r\n      return fetch(`${this._url}/cards`, {\r\n        method: \"POST\",\r\n        headers: this._headers,\r\n        body: JSON.stringify(data)\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n    removeCard(_id) {\r\n      return fetch(`${this._url}/cards/${_id}`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n    getProfileInfo() {\r\n      return fetch(`${this._url}/users/me`, {\r\n          method: \"GET\",\r\n          headers: this._headers\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    changeProfileInfo(data) {\r\n      return fetch(`${this._url}/users/me`, {\r\n          method: \"PATCH\",\r\n          headers: this._headers,\r\n          body: JSON.stringify(data)\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    updateAvatar(data) {\r\n      return fetch(`${this._url}/users/me/avatar`, {\r\n          method: \"PATCH\",\r\n          headers: this._headers,\r\n          body: JSON.stringify(data)\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    removeLike(_id) {\r\n      return fetch(`${this._url}/cards/${_id}/likes`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n    likeCard(_id) {\r\n      return fetch(`${this._url}/cards/${_id}/likes`, {\r\n        method: \"PUT\",\r\n        headers: this._headers,\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n    changeLikeCardStatus(_id, isLiked) {\r\n      if (isLiked) {\r\n        return this.likeCard(_id);\r\n      }\r\n      else {        \r\n        return this.removeLike(_id);\r\n      }\r\n    }\r\n\r\n    setToken(token) {\r\n      this._headers.Authorization = token;\r\n    }\r\n}\r\n\r\n// const token = localStorage.getItem('token')\r\n\r\nconst api = new Api({\r\n  url: \"https://api.okoledova.students.nomoredomains.monster\",\r\n  headers: {\r\n    \"content-type\": \"application/json\",\r\n    \"Authorization\": \"\"\r\n  }\r\n})\r\n\r\n\r\nexport default api;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const [name, setName] = React.useState(\"\");\r\n    const [description, setDescription] = React.useState(\"\");\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser, props.isOpen]);\r\n\r\n    function handleNameChange(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleDescriptionChange(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n      e.preventDefault();\r\n\r\n      props.onUpdateUser({\r\n        name: name,\r\n        about: description,\r\n      });\r\n    } \r\n\r\n    return (\r\n        <PopupWithForm name=\"edit\" title=\"Редактировать профиль\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n            <div className=\"popup__field\">\r\n              <input id=\"name-input\" className=\"popup__input popup__input_content_name popup__input_function_edit\" value={name || ''} name=\"name\" onChange={handleNameChange} placeholder=\"Имя\" type=\"text\" pattern=\"^[ \\-a-zA-Zа-яА-Я]+$\" minLength=\"2\" maxLength=\"40\" required />\r\n              <span className=\"popup__error name-input-error\"></span>\r\n            </div>\r\n            <div className=\"popup__field\">\r\n              <input id=\"about-input\" className=\"popup__input popup__input_content_about popup__input_function_edit\" value={description || ''} name=\"about\" onChange={handleDescriptionChange} placeholder=\"Деятельность\" minLength=\"2\" maxLength=\"200\" required />\r\n              <span className=\"popup__error about-input-error\"></span>\r\n            </div>\r\n        </PopupWithForm>\r\n    );\r\n  }\r\n  \r\n  export default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction EditAvatarPopup(props) {\r\n    const avaterRef = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n      e.preventDefault();\r\n\r\n      props.onUpdateAvatar({\r\n        avatar: avaterRef.current.value\r\n      });\r\n\r\n      avaterRef.current.value = \"\";\r\n    } \r\n\r\n    return (\r\n        <PopupWithForm name=\"update-avatar\" title=\"Обновить аватар\" isOpen={props.isOpen} \r\n        onClose={props.onClose} onSubmit={handleSubmit}>\r\n        <div className=\"popup__field\">\r\n              <input ref={avaterRef} id=\"avatar-input\" \r\n                className=\"popup__input popup__input_content_avatar popup__input_function_update-avatar\" \r\n                name=\"avatar\" placeholder=\"Аватар\" type=\"url\" required />\r\n              <span className=\"popup__error avatar-input-error\"></span>\r\n            </div>\r\n        </PopupWithForm>\r\n    )\r\n  }\r\n  \r\n  export default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const nameRef = React.useRef();\r\n    const linkRef = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n      e.preventDefault();\r\n\r\n      props.onAddPlace({\r\n        name: nameRef.current.value,\r\n        link: linkRef.current.value\r\n      });\r\n\r\n      nameRef.current.value = \"\";\r\n      linkRef.current.value = \"\";\r\n    } \r\n\r\n    return (\r\n        <PopupWithForm name=\"add\" title=\"Новое место\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n            <div className=\"popup__field\">\r\n              <input id=\"place-input\" ref={nameRef} className=\"popup__input popup__input_content_place popup__input_function_add\" name=\"name\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\" required />\r\n              <span className=\"popup__error place-input-error\"></span>\r\n            </div>\r\n            <div className=\"popup__field\">\r\n              <input id=\"url-input\" ref={linkRef} className=\"popup__input popup__input_content_picture popup__input_function_add\" name=\"link\" placeholder=\"Ссылка на картинку\" type=\"url\" required />\r\n              <span className=\"popup__error url-input-error\"></span>\r\n            </div>\r\n        </PopupWithForm>\r\n    )\r\n  }\r\n  \r\n  export default AddPlacePopup;","import Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport api from '../utils/api';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Page(props) {\r\n   // console.log(props); //TODO прокинуть в Header\r\n\r\n    const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n    const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n    const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n    const [selectedCard, setSelectedCard] = useState({});\r\n\r\n    const [currentUser, setСurrentUser] = useState({});\r\n    const [cards, setCards] = useState([]);\r\n\r\n    useEffect(() => {\r\n\r\n        api.getProfileInfo()\r\n        .then (data => {\r\n          setСurrentUser(data);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n    \r\n      }, []);\r\n    \r\n    useEffect(() => {\r\n        api.getInitialCards()\r\n        .then (data => {\r\n          setCards(data.cards);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n    \r\n    }, []);\r\n    \r\n      function handleCardLike(card) {\r\n        const isLiked = card.likes.some(i => i === currentUser._id);\r\n        \r\n        api.changeLikeCardStatus(card._id, !isLiked)\r\n        .then((newCard) => {\r\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n      }\r\n    \r\n      function handleCardDelete(card) {\r\n        api.removeCard(card._id)\r\n        .then(() => {\r\n            setCards((state) => state.filter((c) => c._id !== card._id));\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n      }\r\n    \r\n      function handleEditProfileClick() {\r\n        setEditProfilePopupOpen(true);\r\n      }\r\n    \r\n      function handleAddPlaceClick() {\r\n        setAddPlacePopupOpen(true);\r\n      }\r\n    \r\n      function handleEditAvatarClick() {\r\n        setEditAvatarPopupOpen(true);\r\n      }\r\n    \r\n      function closeAllPopups() {\r\n        setEditProfilePopupOpen(false);\r\n        setAddPlacePopupOpen(false);\r\n        setEditAvatarPopupOpen(false);\r\n        setSelectedCard({});\r\n      }\r\n    \r\n      function handleCardClick(card) {\r\n        setSelectedCard(card);\r\n      }\r\n    \r\n      function handleUpdateUser(data) {\r\n        api.changeProfileInfo(data)\r\n        .then (data => {\r\n          setСurrentUser(data);\r\n        })\r\n        .then (() => {\r\n          closeAllPopups();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n      }\r\n    \r\n      function handleUpdateAvatar(data) {\r\n        api.updateAvatar(data)\r\n        .then (data => {\r\n          setСurrentUser(data);\r\n        })\r\n        .then (() => {\r\n          closeAllPopups();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n      }\r\n    \r\n      function handleAddPlaceSubmit(data) {\r\n        api.addCard(data)\r\n        .then (newCard => {\r\n          setCards([newCard, ...cards]);\r\n        })\r\n        .then (() => {\r\n          closeAllPopups();\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        })\r\n      }\r\n\r\n    return (\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n        <>\r\n            <Header onSignOut={props.onSignOut} email={props.email} loggedIn={true} nameLink=\"Выйти\" way=\"\" />\r\n            <Main onEditProfile={handleEditProfileClick} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick}/>\r\n            <Footer />\r\n            <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n            <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\r\n            <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\r\n            <PopupWithForm name=\"delete\" title=\"Вы уверены?\" />\r\n            <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\r\n        </>\r\n        </CurrentUserContext.Provider>\r\n    );\r\n  }\r\n  \r\n  export default Page;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"./signin\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","// export const BASE_URL = 'https://auth.nomoreparties.co';\r\n// export const BASE_URL = 'https://okoledova.students.nomoredomains.club';\r\nexport const BASE_URL = 'https://api.okoledova.students.nomoredomains.monster';\r\n\r\nconst checkResponse = (response) => response.ok ? response.json() : Promise.reject(`Ошибка: ${response.status}`)\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n  .then(checkResponse)\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n  .then(checkResponse)\r\n};\r\n\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : `Bearer ${token}`\r\n    } \r\n  })\r\n  .then(checkResponse)\r\n}","import Register from './Register.js';\nimport Login from './Login.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport Page from './Page.js';\nimport api from '../utils/api';\nimport ProtectedRoute from './ProtectedRoute';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport * as auth from '../utils/auth';\nimport React, { useEffect, useState } from 'react';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [isMistake, setIsMistake] = useState(false);\n  const [popup, setPopup] = useState(false);\n  const [userData, setUserData] = useState('');\n\n  const history = useHistory();\n\n  useEffect(() => {\n    checkToken();\n  }, []);\n\n  function handleError (error) {\n    console.error(error)\n  }\n\n  function onRegister({ email, password }) {\n    auth.register(password, email)\n      .then((res) => {\n        // const email = res.data.email\n        const email = res.email\n        setUserData(email)\n        setIsMistake(false)\n        history.push('/signin')\n      })\n      .catch((error) => {\n        handleError(error)\n        setIsMistake(true)\n      })\n      .finally(() => {\n        setPopup(true)\n      })\n  }\n\n  function checkToken() {\n    const token = localStorage.getItem('token')\n    \n    if (token) {\n      api.setToken(token);\n      auth.getContent(token)\n        .then((res) => {\n          if (res){\n            // setUserData(res.data.email)\n            setUserData(res.email)\n            setLoggedIn(true)\n            history.push(\"/\")\n          }\n        })\n        .catch(handleError)\n    }\n  }\n\n  function onLogin({ email, password }) {\n    auth.authorize(password, email)\n      .then((res) => {\n        const token = res.token\n        if (token) {\n          localStorage.setItem('token', token)\n          checkToken();\n        }\n      })\n      .catch(handleError)\n  }\n\n  function onSignOut() {\n    setUserData('')\n    setLoggedIn(false)\n    localStorage.removeItem('token')\n  }\n\n  function onCloseStartPopup() {\n    setPopup(false)\n  }\n\n  return (\n    <div className=\"page\">\n    <Switch>\n      {popup && <InfoTooltip isMistake={isMistake} isOpen={popup} onClose={onCloseStartPopup}/>}\n      <Route path=\"/signup\">\n        <Register onRegister={onRegister} />\n      </Route>\n      <Route path=\"/signin\">\n        <Login onLogin={onLogin} />\n      </Route>\n      <ProtectedRoute path=\"/\" loggedIn={loggedIn} email={userData} component={Page} onSignOut={onSignOut} />\n    </Switch>\n    </div>\n  )\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}